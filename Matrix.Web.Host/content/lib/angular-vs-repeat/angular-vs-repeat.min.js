!function(a,b){"use strict";var c=-1!=navigator.appVersion.indexOf("Mac"),d="undefined"!=typeof a.onwheel?"wheel":"undefined"!=typeof a.onmousewheel?"mousewheel":"DOMMouseScroll",e=document.documentElement,f=e.matches?"matches":e.matchesSelector?"matchesSelector":e.webkitMatches?"webkitMatches":e.webkitMatchesSelector?"webkitMatchesSelector":e.msMatches?"msMatches":e.msMatchesSelector?"msMatchesSelector":e.mozMatches?"mozMatches":e.mozMatchesSelector?"mozMatchesSelector":null,g=b.element.prototype.closest||function(a){for(var c=this[0].parentNode;c!==document.documentElement&&null!=c&&!c[f](a);)c=c.parentNode;return c&&c[f](a)?b.element(c):b.element()};b.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(e){return{restrict:"A",scope:!0,require:"?^vsRepeat",controller:["$scope",function(a){this.$scrollParent=a.$scrollParent,this.$fillElement=a.$fillElement}],compile:function(f){var h=f.children().eq(0),i=h.attr("ng-repeat"),j=h[0].outerHTML,k=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(i),l=k[1],m=k[2],n=k[3],o="$vs_collection",p={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsExcess:"excess"};return f.empty(),a.getComputedStyle&&"absolute"===a.getComputedStyle(f[0]).position||f.css("position","relative"),{pre:function(f,h,i,k){function q(a,b){if(!D||D.length<1)return f[o]=[],z=0,v(0),void(f.sizesCumulative=[0]);if(z=D.length,G){f.sizes=D.map(function(a){return a[i.vsSizeProperty]});var c=0;f.sizesCumulative=f.sizes.map(function(a){var b=c;return c+=a,b}),f.sizesCumulative.push(c)}r(),u(b)}function r(){F&&f.$$postDigest(function(){if(h[0].offsetHeight||h[0].offsetWidth)for(var a=h.children(),b=0;b<a.length;){if(null!=a[b].attributes["ng-repeat"]){a[b][M]&&(f.elementSize=a[b][M],u(),F=!1,f.$root&&!f.$root.$$phase&&f.$apply());break}b++}else var c=f.$watch(function(){(h[0].offsetHeight||h[0].offsetWidth)&&(c(),r())})})}function s(a){var b=a.currentTarget;(b.scrollWidth>b.clientWidth||b.scrollHeight>b.clientHeight)&&A.css("display","block")}function t(){"undefined"!=typeof i.vsAutoresize&&(F=!0,r(),f.$root&&!f.$root.$$phase&&f.$apply()),y()&&f.$apply()}function u(a){Q=void 0,R=void 0,y(a),v(G?f.sizesCumulative[z]:f.elementSize*z),f.$emit("vsRepeatReinitialized",f.startIndex,f.endIndex)}function v(a){if(E){if(B.css({width:f.offsetBefore+a+f.offsetAfter+"px",height:"100%"}),k&&k.$fillElement){var b=k.$fillElement[0].parentNode.querySelector("[ng-repeat]");b&&k.$fillElement.css({width:b.scrollWidth+"px"})}}else B.css({height:f.offsetBefore+a+f.offsetAfter+"px",width:"100%"}),k&&k.$fillElement&&(b=k.$fillElement[0].parentNode.querySelector("[ng-repeat]"),b&&k.$fillElement.css({height:b.scrollHeight+"px"}))}function w(){var a=H[0][L];a!==S&&(u(),f.$root&&!f.$root.$$phase&&f.$apply()),S=a}function x(a){var b=!1;return void 0!==a&&"number"==typeof a&&(b=Math.max(a,0),H[0][N]!==b?(H[0][N]=b,K=!0):b=!1,f.$emit("vsRepeatScrolled",b)),b}function y(a){var b,c,d=!0;if(a&&void 0!==a.scrollIndex){if("undefined"!=typeof f.scrollSettings&&(f.scrollSettings.scrollIndex=a.scrollIndex),void 0!==a.scrollIndexPosition)switch("undefined"!=typeof f.scrollSettings&&(f.scrollSettings.scrollIndexPosition=a.scrollIndexPosition),b=0,typeof a.scrollIndexPosition){case"number":b=a.scrollIndexPosition+f.offsetBefore;break;case"string":switch(a.scrollIndexPosition){case"top":b=f.offsetBefore;break;case"middle":b=(H[0][L]-f.sizes[a.scrollIndex])/2;break;case"bottom":b=H[0][L]-f.sizes[a.scrollIndex]-f.offsetAfter;break;case"inview":case"inview#top":case"inview#middle":case"inview#bottom":case"inview#auto":H[0][N]<=f.sizesCumulative[a.scrollIndex]&&H[0][N]+H[0][L]-f.sizes[a.scrollIndex]>=f.sizesCumulative[a.scrollIndex]?(d=!1,b=f.sizesCumulative[a.scrollIndex]-H[0][N]):(("inview#top"===a.scrollIndexPosition||"inview"===a.scrollIndexPosition)&&(b=f.offsetBefore),"inview#bottom"===a.scrollIndexPosition&&(b=H[0][L]-f.sizes[a.scrollIndex]+f.offsetAfter),"inview#middle"===a.scrollIndexPosition&&(b=(H[0][L]-f.sizes[a.scrollIndex])/2),"inview#auto"===a.scrollIndexPosition&&(b=H[0][N]<=f.sizesCumulative[a.scrollIndex]?H[0][L]-f.sizes[a.scrollIndex]+f.offsetAfter:f.offsetBefore));break;default:console.warn("Incorrect scrollIndexPosition string value")}break;default:console.warn("Incorrect scrollIndexPosition type")}else d=!1,b=f.sizesCumulative[a.scrollIndex]-H[0][N];if(f.startIndex=a.scrollIndex,G){for(;f.sizesCumulative[f.startIndex]>f.sizesCumulative[a.scrollIndex]-b;)f.startIndex--;for(c=f.startIndex,f.startIndex=Math.max(Math.floor(f.startIndex-f.excess/2),0),f.endIndex=f.startIndex;f.sizesCumulative[f.endIndex]<f.sizesCumulative[c]-f.offsetBefore+H[0][L];)f.endIndex++;f.endIndex=Math.min(Math.ceil(f.endIndex+f.excess/2),z)}else{for(;f.startIndex*f.elementSize>a.scrollIndex*f.elementSize-b;)f.startIndex--;c=f.startIndex,f.startIndex=Math.max(Math.floor(f.startIndex-f.excess/2),0),f.endIndex=Math.min(f.startIndex+Math.ceil(H[0][L]/f.elementSize)+f.excess/2,z)}}else if(G){for(f.startIndex=0;f.sizesCumulative[f.startIndex]<H[0][N]-f.offsetBefore;)f.startIndex++;for(f.startIndex>0&&f.startIndex--,f.startIndex=Math.max(Math.floor(f.startIndex-f.excess/2),0),f.endIndex=f.startIndex;f.sizesCumulative[f.endIndex]<H[0][N]-f.offsetBefore+H[0][L];)f.endIndex++;f.endIndex=Math.min(Math.ceil(f.endIndex+f.excess/2),z)}else f.startIndex=Math.max(Math.floor((H[0][N]-f.offsetBefore)/f.elementSize+f.excess/2)-f.excess,0),f.endIndex=Math.min(f.startIndex+Math.ceil(H[0][L]/f.elementSize)+f.excess,z);var e=!1;void 0!==a&&void 0!==a.scrollIndex&&void 0!==b&&d&&(e=x(f.sizesCumulative[a.scrollIndex]-b));var g=f.startIndex!==Q||f.endIndex!==R;return g&&(f[o]=D.slice(f.startIndex,f.endIndex),f.$emit("vsRepeatInnerCollectionUpdated",f.startIndex,f.endIndex,Q,R)),Q=f.startIndex,R=f.endIndex,g}var z,A,B,C=b.element(j),D=[],E="undefined"!=typeof i.vsHorizontal,F=!i.vsRepeat,G=!!i.vsSizeProperty,H=i.vsScrollParent?g.call(h,i.vsScrollParent):h,I=E?"translateX":"translateY",J=E?"left":"top",K=!1,L=E?"clientWidth":"clientHeight",M=E?"offsetWidth":"offsetHeight",N=E?"scrollLeft":"scrollTop";if(0===H.length)throw"Specified scroll parent selector did not match any element";f.$scrollParent=H,G&&(f.sizesCumulative=[]),f.elementSize=H[0][L]||50,f.offsetBefore=0,f.offsetAfter=0,f.excess=2,f.scrollSettings={scrollIndex:0,scrollIndexPosition:"top"},f.$watch(i.vsScrollSettings,function(a){"undefined"!=typeof a&&(f.scrollSettings=a,u(f.scrollSettings))},!0),Object.keys(p).forEach(function(a){i[a]&&i.$observe(a,function(b){f[p[a]]=+b,u()})}),f.$watchCollection(m,function(a){D=a||[],q()}),C.attr("ng-repeat",l+" in "+o+(n?" "+n:"")).addClass("vs-repeat-repeated-element");var O=G?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)";"undefined"!=typeof document.documentElement.style.transform?C.attr("ng-style",'{ "transform": "'+I+'(" + '+O+' + "px)"}'):"undefined"!=typeof document.documentElement.style.webkitTransform?C.attr("ng-style",'{ "-webkit-transform": "'+I+'(" + '+O+' + "px)"}'):C.attr("ng-style","{"+J+": "+O+' + "px"}'),e(C)(f),h.append(C),B=b.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"}),h.append(B),e(B)(f),f.$fillElement=B;var P={};c&&(A=b.element('<div class="vs-repeat-wheel-helper"></div>').on(d,function(a){a.preventDefault(),a.stopPropagation(),a.originalEvent&&(a=a.originalEvent),H[0].scrollLeft+=a.deltaX||-a.wheelDeltaX,H[0].scrollTop+=a.deltaY||-a.wheelDeltaY}).on("mousemove",function(a){(P.x!==a.clientX||P.y!==a.clientY)&&b.element(this).css("display","none"),P={x:a.clientX,y:a.clientY}}).css("display","none"),B.append(A)),f.startIndex=0,f.endIndex=0,H.on("scroll",function(){K?K=!1:y()&&f.$apply()}),c&&H.on(d,s),b.element(a).on("resize",t),f.$on("$destroy",function(){b.element(a).off("resize",t)}),f.$on("vsRepeatTrigger",q),f.$on("vsRepeatResize",function(){F=!0,r()});var Q,R,S;f.$watch(function(){"function"==typeof a.requestAnimationFrame?a.requestAnimationFrame(w):w()})}}}}}]),b.element(document.head).append(["<style>.vs-repeat-wheel-helper{position: absolute;top: 0;bottom: 0;left: 0;right: 0;z-index: 99999;background: rgba(0, 0, 0, 0);}.vs-repeat-repeated-element{position: absolute;z-index: 1;}</style>"].join(""))}(window,window.angular);